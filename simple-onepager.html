<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Simple example</title>
</head>
<body>
<canvas id="canvasgl"></canvas>
<script src="https://cdn.jsdelivr.net/npm/twgl.js@4.5.2/dist/4.x/twgl-full.min.js"></script>
<script>
  'use strict';
  const vsource = `
    attribute vec3 position;
    void main() {
        gl_Position = vec4(position, 1);
    }`;
  const fsource = `
    #define bailout 16.0
    precision mediump float;

    uniform vec2 center;
    uniform vec2 size;
    uniform vec2 resolution;
    const int imax = 32;
    
    void main() {
      float x, y, xx = 0.0, yy = 0.0, xy = 0.0, t = 0.0;
      vec2 c = center + size * (gl_FragCoord.xy / resolution - 0.5);

      for (int i = 0; i < imax; i++) {
        x = xx - yy + c.x;
        y = xy + xy + c.y;
        xx = x * x;
        yy = y * y;
        xy = x * y;

        if (xx + yy > bailout) break;
        else { t += 1.0; }
      }
      t = min(1.0, (t + 1.0 + log2(log2(bailout) / log2(xx + yy))) / float(imax));
      gl_FragColor = vec4(t, t, t, 1.0);
    }`;
  const gl = document.getElementById('canvasgl').getContext('webgl');
  const programInfo = twgl.createProgramInfo(gl, [vsource, fsource]);

  const arrays = { position: [-1, 1, 0, 1, 1, 0, 1, -1, 0, 1, -1, 0, -1, -1, 0, -1, 1, 0] };
  const bufferInfo = twgl.createBufferInfoFromArrays(gl, arrays);

  twgl.resizeCanvasToDisplaySize(gl.canvas);
  gl.viewport(0, 0, gl.canvas.width, gl.canvas.height);

  const uniforms = {
    center: [-0.5, 0],
    size: [4, 2],
    resolution: [gl.canvas.width, gl.canvas.height],
  };

  gl.useProgram(programInfo.program);
  twgl.setBuffersAndAttributes(gl, programInfo, bufferInfo);
  twgl.setUniforms(programInfo, uniforms);
  twgl.drawBufferInfo(gl, bufferInfo);
</script>
</body>
</html>